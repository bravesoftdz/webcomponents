!function(t){var n,e=t.Promise,o=e&&"resolve"in e&&"reject"in e&&"all"in e&&"race"in e&&(new e(function(t){n=t}),"function"==typeof n);"undefined"!=typeof exports&&exports?(exports.Promise=o?e:P,exports.Polyfill=P):"function"==typeof define&&define.amd?define(function(){return o?e:P}):o||(t.Promise=P);var r="pending",i="sealed",f="fulfilled",c="rejected",u=function(){};function a(t){return"[object Array]"===Object.prototype.toString.call(t)}var s,h="undefined"!=typeof setImmediate?setImmediate:setTimeout,l=[];function p(){for(var t=0;t<l.length;t++)l[t][0](l[t][1]);l=[],s=!1}function d(t,n){l.push([t,n]),s||(s=!0,h(p,0))}function y(t){var n=t.owner,e=n.state_,o=n.data_,r=t[e],i=t.then;if("function"==typeof r){e=f;try{o=r(o)}catch(t){v(i,t)}}w(i,o)||(e===f&&m(i,o),e===c&&v(i,o))}function w(t,n){var e;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"==typeof n)){var o=n.then;if("function"==typeof o)return o.call(n,function(o){e||(e=!0,n!==o?m(t,o):_(t,o))},function(n){e||(e=!0,v(t,n))}),!0}}catch(n){return e||v(t,n),!0}return!1}function m(t,n){t!==n&&w(t,n)||_(t,n)}function _(t,n){t.state_===r&&(t.state_=i,t.data_=n,d(g,t))}function v(t,n){t.state_===r&&(t.state_=i,t.data_=n,d(j,t))}function b(t){var n=t.then_;t.then_=void 0;for(var e=0;e<n.length;e++)y(n[e])}function g(t){t.state_=f,b(t)}function j(t){t.state_=c,b(t)}function P(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof P==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,n){function e(t){v(n,t)}try{t(function(t){m(n,t)},e)}catch(t){e(t)}}(t,this)}P.prototype={constructor:P,state_:r,then_:null,data_:void 0,then:function(t,n){var e={owner:this,then:new this.constructor(u),fulfilled:t,rejected:n};return this.state_===f||this.state_===c?d(y,e):this.then_.push(e),e.then},catch:function(t){return this.then(null,t)}},P.all=function(t){if(!a(t))throw new TypeError("You must pass an array to Promise.all().");return new this(function(n,e){var o=[],r=0;function i(t){return r++,function(e){o[t]=e,--r||n(o)}}for(var f,c=0;c<t.length;c++)(f=t[c])&&"function"==typeof f.then?f.then(i(c),e):o[c]=f;r||n(o)})},P.race=function(t){if(!a(t))throw new TypeError("You must pass an array to Promise.race().");return new this(function(n,e){for(var o,r=0;r<t.length;r++)(o=t[r])&&"function"==typeof o.then?o.then(n,e):n(o)})},P.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(n){n(t)})},P.reject=function(t){return new this(function(n,e){e(t)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);